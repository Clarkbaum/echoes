'use strict';

//DEPENDENCIES
var express = require('express');
var bodyParser = require('body-parser');
var morgan = require('morgan');
var path = require('path');
var pg = require('pg');
var db = require('../db/db.js');
var cookie = require('cookie-parser');
var app = express();

// ROUTE MODULES
var appServer = require('./routes/appRoutes.js');
var authServer = require('./routes/authRoutes.js');
var newUserServer = require('./routes/newUserRoutes.js');
var dbServer = require('./routes/dbRoutes.js');
var signoutServer = require('./routes/signoutRoute.js');

// MIDDLEWARE
app.use(bodyParser.urlencoded({ extended: false }));
app.use(bodyParser.json());
app.use(morgan('combined'));
// TODO: add cookie secret!
app.use(cookie());
app.use('/public', express.static(path.join(__dirname, '/../compiled/client')));
app.use('/node_modules', express.static(path.join(__dirname, '/../node_modules')));
app.use('/styles', express.static(path.join(__dirname, '/../client/styles')));

// ROUTERS
app.use('/', appServer);
app.use('/querydb', dbServer);
app.use('/signin', authServer);
app.use('/signup', newUserServer);
app.use('/signout', signoutServer);
app.use(function (req, res, next) {
  res.status(404).send('Sorry--we can\'t find that');
});

// LISTENER
app.listen(process.env.PORT, function () {
  console.log('Satan is listening.');
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NlcnZlci9zZXJ2ZXIuanMiXSwibmFtZXMiOlsiZXhwcmVzcyIsInJlcXVpcmUiLCJib2R5UGFyc2VyIiwibW9yZ2FuIiwicGF0aCIsInBnIiwiZGIiLCJjb29raWUiLCJhcHAiLCJhcHBTZXJ2ZXIiLCJhdXRoU2VydmVyIiwibmV3VXNlclNlcnZlciIsImRiU2VydmVyIiwic2lnbm91dFNlcnZlciIsInVzZSIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsImpzb24iLCJzdGF0aWMiLCJqb2luIiwiX19kaXJuYW1lIiwicmVxIiwicmVzIiwibmV4dCIsInN0YXR1cyIsInNlbmQiLCJsaXN0ZW4iLCJwcm9jZXNzIiwiZW52IiwiUE9SVCIsImNvbnNvbGUiLCJsb2ciXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQSxJQUFJQSxVQUFVQyxRQUFRLFNBQVIsQ0FBZDtBQUNBLElBQUlDLGFBQWFELFFBQVEsYUFBUixDQUFqQjtBQUNBLElBQUlFLFNBQVNGLFFBQVEsUUFBUixDQUFiO0FBQ0EsSUFBSUcsT0FBT0gsUUFBUSxNQUFSLENBQVg7QUFDQSxJQUFJSSxLQUFLSixRQUFRLElBQVIsQ0FBVDtBQUNBLElBQUlLLEtBQUtMLFFBQVEsYUFBUixDQUFUO0FBQ0EsSUFBSU0sU0FBU04sUUFBUSxlQUFSLENBQWI7QUFDQSxJQUFJTyxNQUFNUixTQUFWOztBQUVBO0FBQ0EsSUFBSVMsWUFBWVIsUUFBUSx1QkFBUixDQUFoQjtBQUNBLElBQUlTLGFBQWFULFFBQVEsd0JBQVIsQ0FBakI7QUFDQSxJQUFJVSxnQkFBZ0JWLFFBQVEsMkJBQVIsQ0FBcEI7QUFDQSxJQUFJVyxXQUFXWCxRQUFRLHNCQUFSLENBQWY7QUFDQSxJQUFJWSxnQkFBZ0JaLFFBQVEsMEJBQVIsQ0FBcEI7O0FBRUE7QUFDQU8sSUFBSU0sR0FBSixDQUFRWixXQUFXYSxVQUFYLENBQXNCLEVBQUNDLFVBQVUsS0FBWCxFQUF0QixDQUFSO0FBQ0FSLElBQUlNLEdBQUosQ0FBUVosV0FBV2UsSUFBWCxFQUFSO0FBQ0FULElBQUlNLEdBQUosQ0FBUVgsT0FBTyxVQUFQLENBQVI7QUFDQTtBQUNBSyxJQUFJTSxHQUFKLENBQVFQLFFBQVI7QUFDQUMsSUFBSU0sR0FBSixDQUFRLFNBQVIsRUFBbUJkLFFBQVFrQixNQUFSLENBQWVkLEtBQUtlLElBQUwsQ0FBVUMsU0FBVixFQUFxQixxQkFBckIsQ0FBZixDQUFuQjtBQUNBWixJQUFJTSxHQUFKLENBQVEsZUFBUixFQUF5QmQsUUFBUWtCLE1BQVIsQ0FBZWQsS0FBS2UsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLGtCQUFyQixDQUFmLENBQXpCO0FBQ0FaLElBQUlNLEdBQUosQ0FBUSxTQUFSLEVBQW1CZCxRQUFRa0IsTUFBUixDQUFlZCxLQUFLZSxJQUFMLENBQVVDLFNBQVYsRUFBcUIsbUJBQXJCLENBQWYsQ0FBbkI7O0FBRUE7QUFDQVosSUFBSU0sR0FBSixDQUFRLEdBQVIsRUFBYUwsU0FBYjtBQUNBRCxJQUFJTSxHQUFKLENBQVEsVUFBUixFQUFvQkYsUUFBcEI7QUFDQUosSUFBSU0sR0FBSixDQUFRLFNBQVIsRUFBbUJKLFVBQW5CO0FBQ0FGLElBQUlNLEdBQUosQ0FBUSxTQUFSLEVBQW1CSCxhQUFuQjtBQUNBSCxJQUFJTSxHQUFKLENBQVEsVUFBUixFQUFvQkQsYUFBcEI7QUFDQUwsSUFBSU0sR0FBSixDQUFRLFVBQVVPLEdBQVYsRUFBZUMsR0FBZixFQUFvQkMsSUFBcEIsRUFBMEI7QUFDaENELE1BQUlFLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQiw0QkFBckI7QUFDRCxDQUZEOztBQUlBO0FBQ0FqQixJQUFJa0IsTUFBSixDQUFXQyxRQUFRQyxHQUFSLENBQVlDLElBQXZCLEVBQTZCLFlBQVk7QUFDdkNDLFVBQVFDLEdBQVIsQ0FBWSxxQkFBWjtBQUNELENBRkQiLCJmaWxlIjoic2VydmVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy9ERVBFTkRFTkNJRVNcbnZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xudmFyIGJvZHlQYXJzZXIgPSByZXF1aXJlKCdib2R5LXBhcnNlcicpO1xudmFyIG1vcmdhbiA9IHJlcXVpcmUoJ21vcmdhbicpO1xudmFyIHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG52YXIgcGcgPSByZXF1aXJlKCdwZycpO1xudmFyIGRiID0gcmVxdWlyZSgnLi4vZGIvZGIuanMnKTtcbnZhciBjb29raWUgPSByZXF1aXJlKCdjb29raWUtcGFyc2VyJyk7XG52YXIgYXBwID0gZXhwcmVzcygpO1xuXG4vLyBST1VURSBNT0RVTEVTXG52YXIgYXBwU2VydmVyID0gcmVxdWlyZSgnLi9yb3V0ZXMvYXBwUm91dGVzLmpzJyk7XG52YXIgYXV0aFNlcnZlciA9IHJlcXVpcmUoJy4vcm91dGVzL2F1dGhSb3V0ZXMuanMnKTtcbnZhciBuZXdVc2VyU2VydmVyID0gcmVxdWlyZSgnLi9yb3V0ZXMvbmV3VXNlclJvdXRlcy5qcycpO1xudmFyIGRiU2VydmVyID0gcmVxdWlyZSgnLi9yb3V0ZXMvZGJSb3V0ZXMuanMnKTtcbnZhciBzaWdub3V0U2VydmVyID0gcmVxdWlyZSgnLi9yb3V0ZXMvc2lnbm91dFJvdXRlLmpzJyk7XG5cbi8vIE1JRERMRVdBUkVcbmFwcC51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHtleHRlbmRlZDogZmFsc2V9KSk7XG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbmFwcC51c2UobW9yZ2FuKCdjb21iaW5lZCcpKTtcbi8vIFRPRE86IGFkZCBjb29raWUgc2VjcmV0IVxuYXBwLnVzZShjb29raWUoKSk7XG5hcHAudXNlKCcvcHVibGljJywgZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJy8uLi9jb21waWxlZC9jbGllbnQnKSkpO1xuYXBwLnVzZSgnL25vZGVfbW9kdWxlcycsIGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsICcvLi4vbm9kZV9tb2R1bGVzJykpKTtcbmFwcC51c2UoJy9zdHlsZXMnLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnLy4uL2NsaWVudC9zdHlsZXMnKSkpO1xuXG4vLyBST1VURVJTXG5hcHAudXNlKCcvJywgYXBwU2VydmVyKTtcbmFwcC51c2UoJy9xdWVyeWRiJywgZGJTZXJ2ZXIpO1xuYXBwLnVzZSgnL3NpZ25pbicsIGF1dGhTZXJ2ZXIpO1xuYXBwLnVzZSgnL3NpZ251cCcsIG5ld1VzZXJTZXJ2ZXIpO1xuYXBwLnVzZSgnL3NpZ25vdXQnLCBzaWdub3V0U2VydmVyKTtcbmFwcC51c2UoZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7XG4gIHJlcy5zdGF0dXMoNDA0KS5zZW5kKCdTb3JyeS0td2UgY2FuXFwndCBmaW5kIHRoYXQnKVxufSk7XG5cbi8vIExJU1RFTkVSXG5hcHAubGlzdGVuKHByb2Nlc3MuZW52LlBPUlQsIGZ1bmN0aW9uICgpIHtcbiAgY29uc29sZS5sb2coJ1NhdGFuIGlzIGxpc3RlbmluZy4nKVxufSk7XG4iXX0=