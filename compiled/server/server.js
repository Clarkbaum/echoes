'use strict';

//DEPENDENCIES
var express = require('express');
var bodyParser = require('body-parser');
var morgan = require('morgan');
var path = require('path');
var pg = require('pg');
var db = require('../db/db.js');
var cookie = require('cookie-parser');
var app = express();

// ROUTE MODULES
var appServer = require('./routes/appRoutes.js');
var authServer = require('./routes/authRoutes.js');
var newUserServer = require('./routes/newUserRoutes.js');
var dbServer = require('./routes/dbRoutes.js');
var signoutServer = require('./routes/signoutRoute.js');

// MIDDLEWARE
app.use(bodyParser.urlencoded({ extended: false }));
app.use(bodyParser.json());
app.use(morgan('combined'));
// TODO: add cookie secret!
app.use(cookie());
app.use('/public', express.static(path.join(__dirname, '/../compiled/client')));
app.use('/node_modules', express.static(path.join(__dirname, '/../node_modules')));
app.use('/styles', express.static(path.join(__dirname, '/../client/styles')));

// ROUTERS
app.use('/', appServer);
app.use('/querydb', dbServer);
app.use('/signin', authServer);
app.use('/signup', newUserServer);
app.use('/signout', signoutServer);
app.use(function (req, res, next) {
  res.status(404).send('Sorry--we can\'t find that');
});

// LISTENER
app.listen(1337, function () {
  console.log('Satan is listening on port 1337.');
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NlcnZlci9zZXJ2ZXIuanMiXSwibmFtZXMiOlsiZXhwcmVzcyIsInJlcXVpcmUiLCJib2R5UGFyc2VyIiwibW9yZ2FuIiwicGF0aCIsInBnIiwiZGIiLCJjb29raWUiLCJhcHAiLCJhcHBTZXJ2ZXIiLCJhdXRoU2VydmVyIiwibmV3VXNlclNlcnZlciIsImRiU2VydmVyIiwic2lnbm91dFNlcnZlciIsInVzZSIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsImpzb24iLCJzdGF0aWMiLCJqb2luIiwiX19kaXJuYW1lIiwicmVxIiwicmVzIiwibmV4dCIsInN0YXR1cyIsInNlbmQiLCJsaXN0ZW4iLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0EsSUFBSUEsVUFBVUMsUUFBUSxTQUFSLENBQWQ7QUFDQSxJQUFJQyxhQUFhRCxRQUFRLGFBQVIsQ0FBakI7QUFDQSxJQUFJRSxTQUFTRixRQUFRLFFBQVIsQ0FBYjtBQUNBLElBQUlHLE9BQU9ILFFBQVEsTUFBUixDQUFYO0FBQ0EsSUFBSUksS0FBS0osUUFBUSxJQUFSLENBQVQ7QUFDQSxJQUFJSyxLQUFLTCxRQUFRLGFBQVIsQ0FBVDtBQUNBLElBQUlNLFNBQVNOLFFBQVEsZUFBUixDQUFiO0FBQ0EsSUFBSU8sTUFBTVIsU0FBVjs7QUFFQTtBQUNBLElBQUlTLFlBQVlSLFFBQVEsdUJBQVIsQ0FBaEI7QUFDQSxJQUFJUyxhQUFhVCxRQUFRLHdCQUFSLENBQWpCO0FBQ0EsSUFBSVUsZ0JBQWdCVixRQUFRLDJCQUFSLENBQXBCO0FBQ0EsSUFBSVcsV0FBV1gsUUFBUSxzQkFBUixDQUFmO0FBQ0EsSUFBSVksZ0JBQWdCWixRQUFRLDBCQUFSLENBQXBCOztBQUVBO0FBQ0FPLElBQUlNLEdBQUosQ0FBUVosV0FBV2EsVUFBWCxDQUFzQixFQUFDQyxVQUFVLEtBQVgsRUFBdEIsQ0FBUjtBQUNBUixJQUFJTSxHQUFKLENBQVFaLFdBQVdlLElBQVgsRUFBUjtBQUNBVCxJQUFJTSxHQUFKLENBQVFYLE9BQU8sVUFBUCxDQUFSO0FBQ0E7QUFDQUssSUFBSU0sR0FBSixDQUFRUCxRQUFSO0FBQ0FDLElBQUlNLEdBQUosQ0FBUSxTQUFSLEVBQW1CZCxRQUFRa0IsTUFBUixDQUFlZCxLQUFLZSxJQUFMLENBQVVDLFNBQVYsRUFBcUIscUJBQXJCLENBQWYsQ0FBbkI7QUFDQVosSUFBSU0sR0FBSixDQUFRLGVBQVIsRUFBeUJkLFFBQVFrQixNQUFSLENBQWVkLEtBQUtlLElBQUwsQ0FBVUMsU0FBVixFQUFxQixrQkFBckIsQ0FBZixDQUF6QjtBQUNBWixJQUFJTSxHQUFKLENBQVEsU0FBUixFQUFtQmQsUUFBUWtCLE1BQVIsQ0FBZWQsS0FBS2UsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLG1CQUFyQixDQUFmLENBQW5COztBQUVBO0FBQ0FaLElBQUlNLEdBQUosQ0FBUSxHQUFSLEVBQWFMLFNBQWI7QUFDQUQsSUFBSU0sR0FBSixDQUFRLFVBQVIsRUFBb0JGLFFBQXBCO0FBQ0FKLElBQUlNLEdBQUosQ0FBUSxTQUFSLEVBQW1CSixVQUFuQjtBQUNBRixJQUFJTSxHQUFKLENBQVEsU0FBUixFQUFtQkgsYUFBbkI7QUFDQUgsSUFBSU0sR0FBSixDQUFRLFVBQVIsRUFBb0JELGFBQXBCO0FBQ0FMLElBQUlNLEdBQUosQ0FBUSxVQUFVTyxHQUFWLEVBQWVDLEdBQWYsRUFBb0JDLElBQXBCLEVBQTBCO0FBQ2hDRCxNQUFJRSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsNEJBQXJCO0FBQ0QsQ0FGRDs7QUFJQTtBQUNBakIsSUFBSWtCLE1BQUosQ0FBVyxJQUFYLEVBQWlCLFlBQVk7QUFDM0JDLFVBQVFDLEdBQVIsQ0FBWSxrQ0FBWjtBQUNELENBRkQiLCJmaWxlIjoic2VydmVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy9ERVBFTkRFTkNJRVNcbnZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xudmFyIGJvZHlQYXJzZXIgPSByZXF1aXJlKCdib2R5LXBhcnNlcicpO1xudmFyIG1vcmdhbiA9IHJlcXVpcmUoJ21vcmdhbicpO1xudmFyIHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG52YXIgcGcgPSByZXF1aXJlKCdwZycpO1xudmFyIGRiID0gcmVxdWlyZSgnLi4vZGIvZGIuanMnKTtcbnZhciBjb29raWUgPSByZXF1aXJlKCdjb29raWUtcGFyc2VyJyk7XG52YXIgYXBwID0gZXhwcmVzcygpO1xuXG4vLyBST1VURSBNT0RVTEVTXG52YXIgYXBwU2VydmVyID0gcmVxdWlyZSgnLi9yb3V0ZXMvYXBwUm91dGVzLmpzJyk7XG52YXIgYXV0aFNlcnZlciA9IHJlcXVpcmUoJy4vcm91dGVzL2F1dGhSb3V0ZXMuanMnKTtcbnZhciBuZXdVc2VyU2VydmVyID0gcmVxdWlyZSgnLi9yb3V0ZXMvbmV3VXNlclJvdXRlcy5qcycpO1xudmFyIGRiU2VydmVyID0gcmVxdWlyZSgnLi9yb3V0ZXMvZGJSb3V0ZXMuanMnKTtcbnZhciBzaWdub3V0U2VydmVyID0gcmVxdWlyZSgnLi9yb3V0ZXMvc2lnbm91dFJvdXRlLmpzJyk7XG5cbi8vIE1JRERMRVdBUkVcbmFwcC51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHtleHRlbmRlZDogZmFsc2V9KSk7XG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcbmFwcC51c2UobW9yZ2FuKCdjb21iaW5lZCcpKTtcbi8vIFRPRE86IGFkZCBjb29raWUgc2VjcmV0IVxuYXBwLnVzZShjb29raWUoKSk7XG5hcHAudXNlKCcvcHVibGljJywgZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKF9fZGlybmFtZSwgJy8uLi9jb21waWxlZC9jbGllbnQnKSkpO1xuYXBwLnVzZSgnL25vZGVfbW9kdWxlcycsIGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsICcvLi4vbm9kZV9tb2R1bGVzJykpKTtcbmFwcC51c2UoJy9zdHlsZXMnLCBleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnLy4uL2NsaWVudC9zdHlsZXMnKSkpO1xuXG4vLyBST1VURVJTXG5hcHAudXNlKCcvJywgYXBwU2VydmVyKTtcbmFwcC51c2UoJy9xdWVyeWRiJywgZGJTZXJ2ZXIpO1xuYXBwLnVzZSgnL3NpZ25pbicsIGF1dGhTZXJ2ZXIpO1xuYXBwLnVzZSgnL3NpZ251cCcsIG5ld1VzZXJTZXJ2ZXIpO1xuYXBwLnVzZSgnL3NpZ25vdXQnLCBzaWdub3V0U2VydmVyKTtcbmFwcC51c2UoZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7XG4gIHJlcy5zdGF0dXMoNDA0KS5zZW5kKCdTb3JyeS0td2UgY2FuXFwndCBmaW5kIHRoYXQnKVxufSk7XG5cbi8vIExJU1RFTkVSXG5hcHAubGlzdGVuKDEzMzcsIGZ1bmN0aW9uICgpIHtcbiAgY29uc29sZS5sb2coJ1NhdGFuIGlzIGxpc3RlbmluZyBvbiBwb3J0IDEzMzcuJylcbn0pO1xuIl19